# MRGEvalKit
MRGEvalKit is the evaluation framework for AtomiMed, a comprehensive multi-modal benchmark spanning X-ray, CT, MRI, and Ultrasound modalities.

## Installation
To install requirements:
`pip install -r requirements_qwen3.txt`


## Evaluation
### 1. set variables
| Variables | Supported Options |
| :--- | :--- |
| `EVAL_DATASETS` | - `IU_XRAY`<br>- `MIMIC_CXR`<br>- `CheXpert_Plus`<br>- `Amos`<br>- `CT-RATE`<br>- `Merlin`<br>- `RadGenome_Brain_MRI`<br>- `Ultrasound`<br>|
| `MODEL_NAME` | - `HuatuoGPT`<br>- `HuluMed_Qwen2`<br>- `HuluMed_Qwen3`<br>- `InternVL`<br>- `MedGemma`<br>- `Qwen2_5_VL`<br>- `Qwen3_VL`<br>|

set `EVAL_DATASETS`, `MODEL_NAME`, `MODEL_PATH`, `OPENAI_API_KEY` in `eval_chunked.sh`, for example:
```
EVAL_DATASETS="RadGenome_Brain_MRI"
MODEL_NAME="MedGemma"
MODEL_PATH="/path/to/your/ckpt/medgemma-27b-it"
OPENAI_API_KEY="Your key"
```

### 2. run the script
```
cd /path/to/your/root/MRGEvalKit
bash eval_chunked.sh
```

## Detailed Results
| Dataset              | Models          | CIDer    | METEOR | BLEU1  | BLEU2  | BLEU3  | BLEU4  | Rouge1 | Rouge2 | Rouge-L | RATE   | GREEN_mean | GREEN_std | AtomiMed(Ours) |
|----------------------|-----------------|----------|--------|--------|--------|--------|--------|--------|--------|---------|--------|------------|-----------|:--------------:|
|        CT-RATE       | internVL3.5-38B | 0.0037   | 0.145  | 0.2033 | 0.0863 | 0.0301 | 0.0045 | 0.2359 | 0.0452 | 0.2197  | 0.5149 | 0.1057     | 0.1423    |      0.102     |
|                      | qwen2.5VL-7B    | 0.0022   | 0.1126 | 0.1619 | 0.065  | 0.0186 | 0.0023 | 0.2076 | 0.0386 | 0.1932  | 0.4927 | 0.0709     | 0.1404    |     0.0807     |
|                      | qwen3VL-8B      | 0.0028   | 0.128  | 0.1853 | 0.0721 | 0.0216 | 0.0015 | 0.216  | 0.0414 | 0.1998  | 0.5083 | 0.117      | 0.1851    |      0.132     |
|                      | HuatuoGPT-34B   | 0.001    | 0.1166 | 0.1379 | 0.0548 | 0.0129 | 0.0015 | 0.1833 | 0.0278 | 0.1695  | 0.4319 | 0.0462     | 0.1106    |     0.0664     |
|                      | Lingshu-7B      | 0.0013   | 0.0861 | 0.0927 | 0.0366 | 0.0103 | 0.0015 | 0.1913 | 0.0296 | 0.1805  | 0.4871 | 0.0735     | 0.1148    |     0.0774     |
|                      | Lingshu-32B     | 0.0024   | 0.1201 | 0.1769 | 0.0649 | 0.0166 | 0.0014 | 0.1962 | 0.0315 | 0.1796  | 0.4916 | 0.0639     | 0.1391    |      0.198     |
|                      | MedGemma-27B    | 0.001    | 0.0954 | 0.122  | 0.0472 | 0.011  | 0.0014 | 0.1877 | 0.0337 | 0.1758  | 0.4843 | 0.0452     | 0.0966    |     0.0829     |
|                      | Hulumed-7B      | 0.0043   | 0.0719 | 0.0564 | 0.0278 | 0.0143 | 0.0086 | 0.1709 | 0.0398 | 0.1632  | 0.4349 | 0.0352     | 0.1207    |     0.0921     |
|                      | Hulumed-14B     | 5.09E-05 | 0.0563 | 0.0225 | 0.0082 | 0.002  | 0.0002 | 0.1601 | 0.0247 | 0.154   | 0.4241 | 0.0399     | 0.08      |     0.0658     |
|                      | Hulumed-32B     | 0.0338   | 0.2336 | 0.2627 | 0.1809 | 0.1245 | 0.09   | 0.3584 | 0.1476 | 0.3396  | 0.55   | 0.2502     | 0.2247    |     0.1453     |
|         AMOS         | internVL3.5-38B | 0.0036   | 0.1282 | 0.1969 | 0.0898 | 0.0344 | 0.0051 | 0.2196 | 0.0523 | 0.2016  | 0.4776 | 0.0392     | 0.1108    |     0.1146     |
|                      | qwen2.5VL-7B    | 0.0025   | 0.103  | 0.1679 | 0.0636 | 0.015  | 0.0034 | 0.1963 | 0.0375 | 0.1837  | 0.4811 | 0.0841     | 0.1551    |     0.0263     |
|                      | qwen3VL-8B      | 0.0049   | 0.1293 | 0.248  | 0.0994 | 0.0323 | 0.0058 | 0.2119 | 0.0492 | 0.1959  | 0.5169 | 0.1288     | 0.2312    |     0.0547     |
|                      | HuatuoGPT-34B   | 0.0008   | 0.0927 | 0.1107 | 0.0443 | 0.009  | 0.0011 | 0.1861 | 0.0349 | 0.1723  | 0.39   | 0.0043     | 0.0298    |     0.0367     |
|                      | Lingshu-7B      | 0.0217   | 0.2578 | 0.3222 | 0.2182 | 0.1489 | 0.1036 | 0.438  | 0.2213 | 0.415   | 0.6509 | 0.35       | 0.2361    |     0.1463     |
|                      | Lingshu-32B     | 0.0042   | 0.1215 | 0.2135 | 0.0893 | 0.0263 | 0.0069 | 0.2057 | 0.0448 | 0.1878  | 0.4864 | 0.1113     | 0.1906    |     0.0633     |
|                      | MedGemma-27B    | 0.0012   | 0.0997 | 0.1304 | 0.0511 | 0.0133 | 0.0023 | 0.1919 | 0.0363 | 0.18    | 0.4756 | 0.0408     | 0.1088    |     0.0562     |
|                      | Hulumed-7B      | 0.0217   | 0.2423 | 0.3222 | 0.2182 | 0.1489 | 0.1036 | 0.438  | 0.2213 | 0.415   | 0.6509 | 0.35       | 0.2361    |     0.1463     |
|                      | Hulumed-14B     | 0.0274   | 0.2338 | 0.3566 | 0.2408 | 0.1652 | 0.1169 | 0.4224 | 0.2142 | 0.3967  | 0.6608 | 0.3813     | 0.2736    |     0.0985     |
|                      | Hulumed-32B     | 0.0283   | 0.2841 | 0.3481 | 0.2352 | 0.1584 | 0.1087 | 0.4373 | 0.2067 | 0.4152  | 0.6542 | 0.3158     | 0.1833    |     0.2343     |
|        Merlin        | internVL3.5-38B | 0.0009   | 0.0996 | 0.1118 | 0.0465 | 0.0164 | 0.0031 | 0.2036 | 0.0394 | 0.1938  | 0.4731 | 0.2199     | 0.4142    |     0.0784     |
|                      | qwen2.5VL-7B    | 0.0009   | 0.0802 | 0.1097 | 0.0398 | 0.013  | 0.0023 | 0.185  | 0.0298 | 0.1761  | 0.4716 | 0.0929     | 0.1666    |     0.0152     |
|                      | qwen3VL-8B      | 0.0021   | 0.1146 | 0.1775 | 0.0673 | 0.0227 | 0.0036 | 0.2036 | 0.037  | 0.1918  | 0.5207 | 0.0796     | 0.1734    |     0.0495     |
|                      | HuatuoGPT-34B   | 0.0004   | 0.0637 | 0.064  | 0.0226 | 0.0051 | 0.0003 | 0.1467 | 0.0228 | 0.139   | 0.3862 | 0.029      | 0.1097    |     0.0203     |
|                      | Lingshu-7B      | 0.0012   | 0.0979 | 0.1259 | 0.0499 | 0.017  | 0.0034 | 0.2053 | 0.039  | 0.1951  | 0.5093 | 0.0629     | 0.1501    |     0.0509     |
|                      | Lingshu-32B     | 0.0015   | 0.098  | 0.1408 | 0.0542 | 0.0164 | 0.0029 | 0.1932 | 0.0349 | 0.1826  | 0.4854 | 0.0707     | 0.162     |     0.0766     |
|                      | MedGemma-27B    | 0.0005   | 0.0892 | 0.0847 | 0.0307 | 0.0064 | 0.0007 | 0.176  | 0.0286 | 0.1678  | 0.4492 | 0.0617     | 0.1497    |     0.0562     |
|                      | Hulumed-7B      | 0.001    | 0.0829 | 0.1335 | 0.0509 | 0.0139 | 0.0025 | 0.1882 | 0.0349 | 0.1764  | 0.5451 | 0.3559     | 0.4588    |     0.0554     |
|                      | Hulumed-14B     | 0.0013   | 0.0813 | 0.1599 | 0.0629 | 0.0195 | 0.0044 | 0.1988 | 0.0391 | 0.1881  | 0.5447 | 0.6025     | 0.4894    |     0.0858     |
|                      | Hulumed-32B     | 0.0019   | 0.094  | 0.1755 | 0.0705 | 0.025  | 0.0061 | 0.2091 | 0.041  | 0.1978  | 0.5567 | 0.6172     | 0.4861    |     0.1367     |
|         MIMIC        | internVL3.5-38B | 0.0213   | 0.182  | 0.1797 | 0.0928 | 0.0465 | 0.0207 | 0.2909 | 0.0931 | 0.2765  | 0.5475 | 0.2977     | 0.2109    |     0.3706     |
|                      | qwen2.5VL-7B    | 0.0069   | 0.1576 | 0.1866 | 0.0779 | 0.0231 | 0.003  | 0.2393 | 0.0499 | 0.2237  | 0.4753 | 0.1175     | 0.17      |     0.1589     |
|                      | qwen3VL-8B      | 0.0077   | 0.1742 | 0.1954 | 0.0835 | 0.0264 | 0.0032 | 0.239  | 0.0509 | 0.2234  | 0.4909 | 0.1142     | 0.1601    |     0.2698     |
|                      | HuatuoGPT-34B   | 0.0092   | 0.155  | 0.1803 | 0.071  | 0.0211 | 0.0037 | 0.2263 | 0.0444 | 0.2126  | 0.4909 | 0.1456     | 0.204     |     0.2642     |
|                      | Lingshu-7B      | 0.0321   | 0.1615 | 0.1825 | 0.0936 | 0.0466 | 0.0204 | 0.292  | 0.0935 | 0.2787  | 0.5201 | 0.2338     | 0.1871    |     0.2998     |
|                      | Lingshu-32B     | 0.0307   | 0.1597 | 0.1812 | 0.0929 | 0.046  | 0.0199 | 0.2925 | 0.0933 | 0.2792  | 0.5214 | 0.235      | 0.1863    |     0.2928     |
|                      | MedGemma-27B    | 0.0075   | 0.1729 | 0.167  | 0.0749 | 0.0262 | 0.0065 | 0.229  | 0.053  | 0.2157  | 0.5152 | 0.1844     | 0.2066    |     0.3278     |
|                      | Hulumed-7B      | 0.0245   | 0.1369 | 0.1466 | 0.0765 | 0.0388 | 0.0162 | 0.2952 | 0.0996 | 0.2837  | 0.5443 | 0.2562     | 0.1784    |     0.4157     |
|                      | Hulumed-14B     | 0.0924   | 0.2367 | 0.2719 | 0.1646 | 0.1024 | 0.0626 | 0.3376 | 0.1214 | 0.3216  | 0.5397 | 0.2679     | 0.1838    |     0.4051     |
|                      | Hulumed-32B     | 0.0674   | 0.2183 | 0.2614 | 0.1554 | 0.0942 | 0.0545 | 0.3255 | 0.1108 | 0.31    | 0.5562 | 0.275      | 0.1858    |     0.3946     |
|        IU-Xray       | internVL3.5-38B | 0.1926   | 0.2854 | 0.3283 | 0.1943 | 0.1208 | 0.0636 | 0.4445 | 0.1695 | 0.4211  | 0.6137 | 0.6839     | 0.2624    |     0.6203     |
|                      | qwen2.5VL-7B    | 0.0227   | 0.2544 | 0.2133 | 0.0922 | 0.0345 | 0.0091 | 0.3321 | 0.069  | 0.3135  | 0.5297 | 0.5511     | 0.3539    |      0.421     |
|                      | qwen3VL-8B      | 0.0017   | 0.2248 | 0.1426 | 0.0614 | 0.0178 | 0.0046 | 0.2499 | 0.0483 | 0.2401  | 0.5118 | 0.3906     | 0.3853    |     0.2484     |
|                      | HuatuoGPT-34B   | 0.0018   | 0.2732 | 0.1663 | 0.0746 | 0.0313 | 0.0056 | 0.3022 | 0.0635 | 0.2908  | 0.5645 | 0.7245     | 0.3503    |     0.5629     |
|                      | Lingshu-7B      | 0.3158   | 0.264  | 0.2936 | 0.1821 | 0.115  | 0.0521 | 0.4714 | 0.1788 | 0.4481  | 0.5979 | 0.5323     | 0.2567    |     0.6326     |
|                      | Lingshu-32B     | 0.3596   | 0.309  | 0.3414 | 0.2199 | 0.1443 | 0.0801 | 0.4703 | 0.1995 | 0.4571  | 0.6575 | 0.6355     | 0.2639    |     0.6192     |
|                      | MedGemma-27B    | 0.0273   | 0.2376 | 0.175  | 0.0838 | 0.0364 | 0.0124 | 0.2963 | 0.0719 | 0.2822  | 0.5729 | 0.6475     | 0.3351    |     0.5237     |
|                      | Hulumed-7B      | 0.1802   | 0.2579 | 0.2846 | 0.1736 | 0.1027 | 0.0561 | 0.44   | 0.1668 | 0.4185  | 0.6388 | 0.6549     | 0.2706    |     0.6393     |
|                      | Hulumed-14B     | 0.1153   | 0.1929 | 0.195  | 0.1165 | 0.0701 | 0.0334 | 0.409  | 0.1552 | 0.3851  | 0.6427 | 0.5566     | 0.247     |      0.649     |
|                      | Hulumed-32B     | 0.1429   | 0.2736 | 0.2744 | 0.1548 | 0.0892 | 0.0461 | 0.4274 | 0.141  | 0.4074  | 0.6303 | 0.6646     | 0.2684    |     0.6367     |
|       Chexpert       | internVL3.5-38B | 0.0502   | 0.1312 | 0.132  | 0.0538 | 0.0216 | 0.007  | 0.2035 | 0.0507 | 0.1919  | 0.4779 | 0.2587     | 0.2936    |     0.3303     |
|                      | qwen2.5VL-7B    | 0.0086   | 0.1456 | 0.1152 | 0.0436 | 0.0126 | 0.0034 | 0.1848 | 0.0332 | 0.1733  | 0.4322 | 0.1407     | 0.2576    |     0.1799     |
|                      | qwen3VL-8B      | 0.0025   | 0.1538 | 0.1063 | 0.037  | 0.006  | 0.0005 | 0.1761 | 0.0269 | 0.1654  | 0.4474 | 0.165      | 0.2844    |     0.2706     |
|                      | HuatuoGPT-34B   | 0.0018   | 0.1357 | 0.0901 | 0.032  | 0.0093 | 0.0019 | 0.1555 | 0.0252 | 0.1461  | 0.4376 | 0.2014     | 0.3251    |     0.2455     |
|                      | Lingshu-7B      | 0.0374   | 0.1139 | 0.1216 | 0.0405 | 0.0154 | 0.0049 | 0.1989 | 0.0372 | 0.1864  | 0.442  | 0.2254     | 0.2874    |     0.2674     |
|                      | Lingshu-32B     | 0.0488   | 0.1346 | 0.1457 | 0.0602 | 0.0279 | 0.0139 | 0.2196 | 0.0549 | 0.2088  | 0.4761 | 0.2353     | 0.2713    |     0.2863     |
|                      | MedGemma-27B    | 0.0026   | 0.1503 | 0.0922 | 0.0348 | 0.0114 | 0.0035 | 0.1606 | 0.0303 | 0.1498  | 0.4702 | 0.2502     | 0.331     |      0.266     |
|                      | Hulumed-7B      | 0.1393   | 0.1402 | 0.1579 | 0.0809 | 0.0402 | 0.0175 | 0.26   | 0.0822 | 0.2466  | 0.5193 | 0.2379     | 0.2628    |     0.3854     |
|                      | Hulumed-14B     | 0.1072   | 0.1228 | 0.138  | 0.0669 | 0.0338 | 0.0153 | 0.2286 | 0.0684 | 0.2192  | 0.5049 | 0.2698     | 0.2768    |     0.3966     |
|                      | Hulumed-32B     | 0.0892   | 0.1384 | 0.1494 | 0.0723 | 0.0333 | 0.0148 | 0.2434 | 0.0767 | 0.2344  | 0.5159 | 0.3031     | 0.3016    |     0.3833     |
|      Ultrasound      | internVL3.5-38B | 0.0105   | 0.1744 | 0.2169 | 0.0985 | 0.031  | 0.0054 | 0.2296 | 0.057  | 0.2133  | 0.4937 | 0.1349     | 0.1794    |     0.2814     |
|                      | qwen2.5VL-7B    | 0.0063   | 0.1257 | 0.1856 | 0.0764 | 0.0147 | 0.0038 | 0.1918 | 0.0413 | 0.1732  | 0.411  | 0.0453     | 0.1257    |     0.2593     |
|                      | qwen3VL-8B      | 0.0064   | 0.1388 | 0.1877 | 0.0648 | 0.0128 | 0.0016 | 0.194  | 0.0337 | 0.1764  | 0.4431 | 0.087      | 0.1718    |     0.2486     |
|                      | HuatuoGPT-34B   | 0.0086   | 0.1595 | 0.1942 | 0.076  | 0.0199 | 0.0048 | 0.2202 | 0.0463 | 0.1986  | 0.4672 | 0.096      | 0.153     |     0.3369     |
|                      | Lingshu-7B      | 0.0051   | 0.107  | 0.1226 | 0.0473 | 0.0186 | 0.0083 | 0.2263 | 0.0535 | 0.2091  | 0.4822 | 0.071      | 0.1274    |     0.1947     |
|                      | Lingshu-32B     | 0.0096   | 0.1606 | 0.2014 | 0.0856 | 0.0252 | 0.0049 | 0.2116 | 0.0505 | 0.1916  | 0.4744 | 0.0889     | 0.1589    |     0.2514     |
|                      | MedGemma-27B    | 0.0043   | 0.1141 | 0.1684 | 0.0667 | 0.0102 | 0.0009 | 0.1748 | 0.0348 | 0.1606  | 0.3795 | 0.0208     | 0.077     |     0.1579     |
|                      | Hulumed-7B      | 0.0076   | 0.1256 | 0.1398 | 0.0591 | 0.0197 | 0.0063 | 0.2275 | 0.0538 | 0.2085  | 0.4874 | 0.0726     | 0.11      |     0.2689     |
|                      | Hulumed-14B     | 0.0042   | 0.127  | 0.127  | 0.0498 | 0.0184 | 0.007  | 0.2258 | 0.0491 | 0.2041  | 0.4695 | 0.0628     | 0.11      |     0.2305     |
|                      | Hulumed-32B     | 0.0049   | 0.1018 | 0.1188 | 0.0454 | 0.0162 | 0.0061 | 0.2126 | 0.0481 | 0.1941  | 0.4729 | 0.0775     | 0.1164    |      0.326     |
| RadGenome_Brain_MRI  | internVL3.5-38B | 0.0142   | 0.2176 | 0.268  | 0.1324 | 0.0656 | 0.0189 | 0.2995 | 0.0749 | 0.2694  | 0.522  | 0.2743     | 0.1886    |     0.5265     |
|                      | qwen2.5VL-7B    | 0.0117   | 0.1716 | 0.2436 | 0.0998 | 0.0324 | 0.0069 | 0.27   | 0.0534 | 0.2445  | 0.4497 | 0.5437     | 0.1059    |     0.2152     |
|                      | qwen3VL-8B      | 0.0009   | 0.1776 | 0.1821 | 0.0803 | 0.029  | 0.0068 | 0.2249 | 0.0483 | 0.1981  | 0.4829 | 0.1214     | 0.1605    |     0.4826     |
|                      | HuatuoGPT-34B   | 0.0124   | 0.1807 | 0.2408 | 0.103  | 0.0389 | 0.0092 | 0.2526 | 0.0518 | 0.2204  | 0.4509 | 0.0895     | 0.1582    |     0.2151     |
|                      | Lingshu-7B      | 0.0044   | 0.1976 | 0.2224 | 0.1028 | 0.0439 | 0.009  | 0.2693 | 0.0605 | 0.2412  | 0.5044 | 0.2298     | 0.213     |     0.4853     |
|                      | Lingshu-32B     | 0.0087   | 0.1942 | 0.2296 | 0.1048 | 0.0416 | 0.009  | 0.2616 | 0.0578 | 0.2323  | 0.4865 | 0.2234     | 0.2349    |     0.3964     |
|                      | MedGemma-27B    | 0.0129   | 0.2005 | 0.2475 | 0.1105 | 0.0396 | 0.0073 | 0.2718 | 0.0617 | 0.2461  | 0.4954 | 0.1305     | 0.1443    |     0.4292     |
|                      | Hulumed-7B      | 0.0131   | 0.1399 | 0.1959 | 0.0911 | 0.0398 | 0.0139 | 0.2527 | 0.0607 | 0.2345  | 0.4384 | 0.0867     | 0.1486    |     0.3103     |
|                      | Hulumed-14B     | 0.0084   | 0.1232 | 0.1459 | 0.0679 | 0.0281 | 0.0077 | 0.2472 | 0.0551 | 0.22285 | 0.4435 | 0.1091     | 0.1329    |      0.432     |
|                      | Hulumed-32B     | 0.0067   | 0.1071 | 0.1066 | 0.0474 | 0.0204 | 0.0074 | 0.2179 | 0.0469 | 0.2003  | 0.4131 | 0.0932     | 0.1648    |     0.2881     |# MRGEvalkit
